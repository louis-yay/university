---
Date: 2024-10-08
Reviewed: false
---
Le debugging correspond à l’analyse des bugs dans un programme

Le debugger permet:

- D’exécuter le programme pas à pas
- Afficher les variables des valeurs à tout moment
- Mettre en place des points d’arrêts sur des conditions / lignes du programme

Le debugger a besoin d’information supplémentaire pour s’exécuter, on peu préciser lors de la compilation l’option `-g` pour pouvoir le debugger.

- ==CETTE ETAPE EST ESSENTIEL==

On utilisera le debugger `gdb` en utilisant l’interface graphique `ddd`

```C
//compilation
gcc -std=c99 -g bug.c -o bug

//Lancement du debugger
gdb bug

//Dans l'interface gdb on execute des commandes
run arg1 "arg2" ...
```

  

### Outils GDB

- `kill` → Termine le programme (C) en cours d’exécution
- `quit` → Quitter l’interface gdb
- `help <commande>` → Informations sup sur la commande
- `Ctrl+C` → Met en pause l’exécution du programme et affiche la prochaine ligne exécuté
    - `continue` → Permet de relancer l’exécution
    - `list <n>` → Affiche les n lignes autour de la ligne le programme s’est arrêté
- `next` → Passe à la prochaine instruction de la fonction courante
- `step` → Passe à prochaine instruction du programme (plus précis)
- `print <variable>` → Affiche la valeur d’une variable donnée
- `set var <variable> = <valeur>` → Donne une nouvelle valeur à une variable existante
- `call <fonction>` → Appelle une fonction définit dans le programme
    - `finish` → Termine l’exécution de la fonction en cours
- `backtrace` → Permet de voir l’état de la pile au niveau de la fonction à laquelle on se trouve
    - `frame <numero de ligne>` → Affiche la ligne courante de la frame `<numero de ligne>`
- `info locals` → Affiche les valeurs des variables locales
- `break <numero_de_ligne ou nom_de_fonction>` → Demander au programme de s’arrêter à une certaine ligne / a l’exécution d’une certaine fonction
- Surveillance des variables:
    - `rwatch <variable>` → S’arrête lors de la lecture de la variable
    - `watch <variable>` → S’arrête lors de l’écriture de la variable
    - `awatch <variable>` → S’arrête à l’écriture et à la lecture de la variable
- `x/<format> <adresse_memoire>` → Affiche l’état de la mémoire à un emplacement donné.

  

### VALGRIND

L’outil `memcheck` de la suite d’outils _Valgrind_ permet de détecter la plupart des erreurs lié à, la mémoire.

- Il a besoin d’argument à la compilation comme GDB `-g` et sans optimisation `-O0`

On peu le lancer avec la commande suivante:

- `valgrind --leak-check=yes <executable> <args>`

“y’a pas mal de debugger dans la nature”

“comme on le dit oncle ben: un grand pouvoir implique de grande responsabilité”