---
Date: 2024-09-30
Reviewed: false
---
**Principe:** Mécanisme par lequel un paquet IP est ==acheminé== d’un expéditeur A vers un expéditeur B, en s’appuyant sur des ==nœuds intermédiaires==

- On distingue le routage ==statique== du routage ==dynamique:==
    - Statique: La table de routage qui oriente les paquet est écrite à la main
    - Dynamique: La table de routage est écrite dynamiquement (par algo)

  

### Table de routage

Chaque nœud du réseau a des information sur le nœud suivant (==next hop==) vers lequel il doit envoyer son paquet pour atteindre sa destination final (==dest addr==)

- Il faut distinguer les ==route directe== vers un réseau ou une machine
- Des ==routes indirecte==, dont les routes spécifiques vers un réseau et la route par défaut.

```C
kira@MSI:~$ route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         172.21.240.1    0.0.0.0         UG    0      0        0 eth0
172.21.240.0    0.0.0.0         255.255.240.0   U     0      0        0 eth0
```

#### Flags:
    - `U` (up) route active
    - `G` route indirecte qui passe par un routeur (_Gateway_); sinon route directe (pas `G`)
    - `H` l’adresse de destination est l’adresse d’une machine (_host_) sinon l’adresse est celle d’un réseau (pas `H`)

#### Le routage des paquets se fait en suivant l’algorithme suivant:

```C
// host route
if (DestAddr = DestFinal)
envoyer le paquet via la route directe ou indirecte vers le next hop
// net route
else if (DestAddr = DestFinal & GenMask)
envoyer le paquet via la route directe ou indirecte vers le next hop
// default route
else
envoyer au next hop de la route par défaut
```

==NOTE: Plus simplement, on remonte les “couche” de routeur en routeur jusqu’à ce qu’un routeur dit “d’assez haut niveau” connaisse le chemin vers la destination et nous y dirige.  
Par exemple avec un traceroute:  
==

```C
traceroute www.labri.fr
traceroute to www.labri.fr (147.210.8.59), 30 hops max, 60 byte packets
 1 _gateway (192.168.1.254) 0.931 ms
 2 p25.socabim.isdnet.net (194.149.169.41) 35.552 ms
 3 free-paris-por1.bb.ip-plus.net (193.5.122.58) 36.783 ms
 4 193.51.187.208 (193.51.187.208) 34.955 ms
 5 te2-2-lyon2-rtr-021.noc.renater.fr (193.51.177.43) 49.554
 6 te0-0-0-5-lyon1-rtr-001.noc.renater.fr (193.51.177.216) 50.311 ms
 7 te0-0-0-0-ren-nr-clermont-rtr-091.noc.renater.fr (193.51.177.227) 49.938 ms
 8 te0-0-0-0-ren-nr-bordeaux-rtr-091.noc.renater.fr (193.51.177.84) 51.531 ms
 9 reaumur-vl10-gi8-1-bordeaux-rtr-021.noc.renater.fr (193.51.183.37) 49.163 ms
10 147.210.246.205 (147.210.246.205) 48.959 ms
11 www3.labri.fr (147.210.8.59) 54.947 ms
```

  

### Protocole DNS

Association d’un nom lisible a une adresse IP.

Modèle client/serveur:

- Un client interroge un serveur de nom (DNS) et attend une réponse (UDP, port 53)

Possibilité de tester le serveur DNS: `nslookup www.<domaine>.<extention>`

- (autre methode): `host www.<domaine>.<extention>`
    - Un nom de domaine peut avoir plusieurs `IPV4`

[[Tableau de bord étudiant/L1/Cours/Réseaux/Notes/TP/TP4 Scapy]]